package xo

// Code generated by xo. DO NOT EDIT.

import (
	"context"

	"github.com/google/uuid"
)

// Products represents a row from 'public.products'.
type Products struct {
	ID          uuid.UUID `json:"id"`          // id
	Name        string    `json:"name"`        // name
	Price       int64     `json:"price"`       // price
	Description string    `json:"description"` // description
	Weight      int       `json:"weight"`      // weight
}

// ProductsByLimit runs a custom query, returning results as [Products].
func ProductsByLimit(ctx context.Context, db DB, limit int) ([]*Products, error) {
	// query
	const sqlstr = `SELECT *      FROM products      LIMIT $1`
	// run
	logf(sqlstr, limit)
	rows, err := db.QueryContext(ctx, sqlstr, limit)
	if err != nil {
		return nil, logerror(err)
	}
	defer rows.Close()
	// load results
	var res []*Products
	for rows.Next() {
		var p Products
		// scan
		if err := rows.Scan(&p.ID, &p.Name, &p.Price, &p.Description, &p.Weight); err != nil {
			return nil, logerror(err)
		}
		res = append(res, &p)
	}
	if err := rows.Err(); err != nil {
		return nil, logerror(err)
	}
	return res, nil
}
